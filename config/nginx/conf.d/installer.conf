# HTTP server for distributing installer and certificates
server {
    listen 8081;
    server_name _;

    root /var/lib/nginx-proxy/dist;

    # Disable access log for installer endpoint
    access_log off;

    # Enable directory listing
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime on;

    # Set proper content type for shell scripts
    location ~ \.sh$ {
        default_type text/x-shellscript;
    }

    # Set proper content type for certificates
    location ~ \.crt$ {
        default_type application/x-x509-ca-cert;
        add_header Content-Disposition 'attachment';
    }
}
