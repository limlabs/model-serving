# HTTP server for distributing installer and certificates
server {
    listen 8080;
    server_name _;

    root /var/lib/vllm/nginx/dist;

    # Disable access log for installer endpoint
    access_log off;

    location / {
        autoindex on;
        autoindex_exact_size off;
        autoindex_localtime on;
    }

    # Direct access to certificate
    location /liminati-ca.crt {
        alias /var/lib/vllm/nginx/ssl/dist/liminati-ca.crt;
        add_header Content-Type application/x-x509-ca-cert;
        add_header Content-Disposition 'attachment; filename="liminati-ca.crt"';
    }

    # Direct access to installer script
    location /install-client.sh {
        alias /var/lib/vllm/nginx/dist/install-client.sh;
        add_header Content-Type text/plain;
    }
}
