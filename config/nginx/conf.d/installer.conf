# HTTP server for distributing installer and certificates
server {
    listen 8081;
    server_name _;

    root /var/lib/llm-services/nginx/dist;

    # Disable access log for installer endpoint
    access_log off;

    # Enable directory listing
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime on;

    # Set proper content type for shell scripts
    location ~ \.sh$ {
        default_type text/x-shellscript;
    }

    # Direct access to certificate from SSL directory
    location = /liminati-ca.crt {
        alias /var/lib/vllm/nginx/ssl/dist/liminati-ca.crt;
        default_type application/x-x509-ca-cert;
        add_header Content-Disposition 'attachment; filename="liminati-ca.crt"';
    }
}
